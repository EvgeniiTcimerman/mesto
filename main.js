(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r);if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key,"string"),"symbol"===e(i)?i:String(i)),o)}var i}var r=function(){function e(t,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t,this._link=r,this._template=n,this._handleCardClick=o}var r,n;return r=e,(n=[{key:"_getCardTemplate",value:function(){return document.querySelector(this._template).content.querySelector(".place").cloneNode(!0)}},{key:"generateCard",value:function(){return this._cardElement=this._getCardTemplate(),this._cardImage=this._cardElement.querySelector(".place__photo"),this._cardLike=this._cardElement.querySelector(".place__like"),this._cardElement.querySelector(".place__name").textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this._setEventListeners(),this._cardElement}},{key:"_setEventListeners",value:function(){var e=this;this._cardElement.querySelector(".place__delete").addEventListener("click",(function(){e._handleDeleteCard()})),this._cardLike.addEventListener("click",(function(){e._handleLikeCard()})),this._cardImage.addEventListener("click",(function(){e._handleCardClick(e._name,e._link)}))}},{key:"_handleDeleteCard",value:function(){this._cardElement.remove()}},{key:"_handleLikeCard",value:function(){this._cardLike.classList.toggle("place__like_active")}}])&&t(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t);if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key,"string"),"symbol"===n(i)?i:String(i)),o)}var i}var i=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._validationSelectors=t,this._formElement=r,this._inputList=this._formElement.querySelectorAll(this._validationSelectors.inputSelector),this._submitButton=this._formElement.querySelector(this._validationSelectors.submitButtonSelector)}var t,r;return t=e,(r=[{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"_setEventListeners",value:function(){var e=this;this.disableSubmitButton(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_showInputError",value:function(e,t){var r=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._validationSelectors.errorClass),r.textContent=t,r.classList.add(this._validationSelectors.inputErrorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._validationSelectors.errorClass),t.classList.remove(this._validationSelectors.inputErrorClass),t.textContent=""}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this.disableSubmitButton():this._enableSubmitButton()}},{key:"removeValidationErrors",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"disableSubmitButton",value:function(){this._submitButton.classList.add(this._validationSelectors.inactiveButtonClass),this._submitButton.setAttribute("disabled","disabled")}},{key:"_enableSubmitButton",value:function(){this._submitButton.classList.remove(this._validationSelectors.inactiveButtonClass),this._submitButton.removeAttribute("disabled")}},{key:"_hasInvalidInput",value:function(){return Array.from(this._inputList).some((function(e){return!e.validity.valid}))}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===u(o)?o:String(o)),n)}var o}var c=function(){function e(t,r){var n=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=n,this._renderer=o,this._container=document.querySelector(r)}var t,r;return t=e,r=[{key:"addItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"before";switch(t){case"before":this._container.prepend(e);break;case"after":this._container.append(e)}}},{key:"renderCards",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}}],r&&a(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function p(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===l(t)?t:String(t)}var f=function(){function e(t){var r,n,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=function(e){"Escape"===e.key&&i.close()},(n=p(n="_handleEscClose"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._popupElement=document.querySelector(t)}var t,r;return t=e,(r=[{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__close"))&&e.close()}))}}])&&s(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===y(o)?o:String(o)),n)}var o}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=v(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},m.apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function _(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(n);if(o){var r=h(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return _(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._cardImage=document.querySelector(".popup__img"),t._cardImageText=document.querySelector(".popup__subtitle"),t}return t=u,(r=[{key:"open",value:function(e,t){this._cardImage.src=t,this._cardImage.alt=e,this._cardImageText.textContent=e,m(h(u.prototype),"open",this).call(this)}}])&&d(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(f);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===g(o)?o:String(o)),n)}var o}function w(){return w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=k(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},w.apply(this,arguments)}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function O(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(n);if(o){var r=P(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return O(this,e)});function u(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,e))._formSubmit=t,r._popupFormElement=r._popupElement.querySelector(".popup__form"),r._inputList=Array.from(r._popupFormElement.querySelectorAll(".popup__edit")),r}return t=u,(r=[{key:"_getInputValues",value:function(){var e={};return this._inputList.forEach((function(t){e[t.name]=t.value})),e}},{key:"close",value:function(){w(P(u.prototype),"close",this).call(this),this._popupFormElement.reset()}},{key:"setEventListeners",value:function(){var e=this;this._popupFormElement.addEventListener("submit",(function(t){t.preventDefault(),e._formSubmit(e._getInputValues()),e.close()})),w(P(u.prototype),"setEventListeners",this).call(this)}}])&&E(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(f);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==C(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===C(o)?o:String(o)),n)}var o}var q=function(){function e(t){var r=t.profileNameSelector,n=t.profileDescriptionSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileName=document.querySelector(r),this._profileDescription=document.querySelector(n)}var t,r;return t=e,(r=[{key:"getUserInfo",value:function(){return{profileName:this._profileName.textContent,description:this._profileDescription.textContent}}},{key:"setUserInfo",value:function(e){var t=e.profileName,r=e.description;this._profileName.textContent=t,this._profileDescription.textContent=r}}])&&I(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),B={formSelector:".popup__form",inputSelector:".popup__edit",submitButtonSelector:".popup__submit-button",inactiveButtonClass:".popup__submit-button_disabled",inputErrorClass:".popup__item-error",errorClass:".popup__edit_invalid"},T=document.querySelector(".profile__edit-button"),x=document.querySelector(".profile__add-button"),R=document.querySelector(".popup_type_edit .popup__form"),D=document.querySelector(".popup_type_new-card .popup__form"),N=R.querySelector(".popup__edit_type_name"),V=R.querySelector(".popup__edit_type_description"),A=(document.querySelector(".places__grid"),new S(".popup_type_image"));function F(e,t){A.open(e,t)}A.setEventListeners();var U=function(e,t,n){return new r(e,t,n,F).generateCard()},z=new c({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(e){z.addItem(U(e.name,e.link,".template-place"),"after")}},".places__grid");z.renderCards();var M=new L(".popup_type_new-card",(function(e){z.addItem(U(e.title,e.link,".template-place")),M.close()}));M.setEventListeners();var G=new q({profileNameSelector:".profile__name",profileDescriptionSelector:".profile__description"}),H=new L(".popup_type_edit",(function(e){G.setUserInfo({profileName:e.profileName,description:e.description}),H.close()}));H.setEventListeners();var J=new i(B,R);J.enableValidation();var K=new i(B,D);K.enableValidation(),T.addEventListener("click",(function(){J.removeValidationErrors();var e=G.getUserInfo();N.value=e.profileName.trim(),V.value=e.description.trim(),H.open()})),x.addEventListener("click",(function(){D.reset(),K.removeValidationErrors(),K.disableSubmitButton(),M.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUFBWSxDQUNuQnJCLFlBQWFWLEVBQVdVLFlBQ3hCQyxZQUFhWCxFQUFXVyxjQUUxQm1CLEVBQWMxQyxPQUNoQixJQUVBMEMsRUFBY1Qsb0JBSWQsSUFBTVcsRUFBbUIsSUFBSS9GLEVBQzNCQyxFQUNBNkUsR0FFRmlCLEVBQWlCQyxtQkFFakIsSUFBTUMsRUFBaUIsSUFBSWpHLEVBQ3pCQyxFQUNBOEUsR0FFRmtCLEVBQWVELG1CQUlmcEIsRUFBV2xGLGlCQUFpQixTQUFTLFdBQ25DcUcsRUFBaUJHLHlCQUVqQixJQUFNQyxFQUFrQlAsRUFBU1EsY0FFakNwQixFQUFVaEIsTUFBUW1DLEVBQWdCMUIsWUFBWTRCLE9BQzlDcEIsRUFBaUJqQixNQUFRbUMsRUFBZ0J6QixZQUFZMkIsT0FFckRSLEVBQWNWLE1BQ2hCLElBRUFOLEVBQVVuRixpQkFBaUIsU0FBUyxXQUNsQ3FGLEVBQWtCZCxRQUVsQmdDLEVBQWVDLHlCQUVmRCxFQUFldkYsc0JBRWZnRixFQUFhUCxNQUNmLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKG5hbWUsIGxpbmssIHRlbXBsYXRlLCBoYW5kbGVDYXJkQ2xpY2spIHtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZSA9IHRlbXBsYXRlO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gIH1cclxuXHJcbiAgX2dldENhcmRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGUpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0Q2FyZFRlbXBsYXRlKCk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGFjZV9fcGhvdG9cIik7XHJcbiAgICB0aGlzLl9jYXJkTGlrZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VfX2xpa2VcIik7XHJcblxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGFjZV9fbmFtZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VfX2RlbGV0ZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2NhcmRMaWtlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VDYXJkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxpa2VDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZExpa2UuY2xhc3NMaXN0LnRvZ2dsZShcInBsYWNlX19saWtlX2FjdGl2ZVwiKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHZhbGlkYXRpb25TZWxlY3RvcnMsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl92YWxpZGF0aW9uU2VsZWN0b3JzID0gdmFsaWRhdGlvblNlbGVjdG9ycztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFxyXG4gICAgICB0aGlzLl92YWxpZGF0aW9uU2VsZWN0b3JzLmlucHV0U2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl92YWxpZGF0aW9uU2VsZWN0b3JzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gIH1cclxuXHJcbiAgLy8g0LzQtdGC0L7QtCDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC+0YjQuNCx0LrQuFxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdGlvblNlbGVjdG9ycy5lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3ZhbGlkYXRpb25TZWxlY3RvcnMuaW5wdXRFcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIC8vINC80LXRgtC+0LQg0YHQutGA0YvRgtC40Y8g0L7RiNC40LHQutC4XHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGlvblNlbGVjdG9ycy5lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3ZhbGlkYXRpb25TZWxlY3RvcnMuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9lbmFibGVTdWJtaXRCdXR0b24oKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbW92ZVZhbGlkYXRpb25FcnJvcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRpc2FibGVTdWJtaXRCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZChcclxuICAgICAgdGhpcy5fdmFsaWRhdGlvblNlbGVjdG9ycy5pbmFjdGl2ZUJ1dHRvbkNsYXNzXHJcbiAgICApO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwiZGlzYWJsZWRcIik7XHJcbiAgfVxyXG5cclxuICBfZW5hYmxlU3VibWl0QnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXHJcbiAgICAgIHRoaXMuX3ZhbGlkYXRpb25TZWxlY3RvcnMuaW5hY3RpdmVCdXR0b25DbGFzc1xyXG4gICAgKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLl9pbnB1dExpc3QpLnNvbWUoXHJcbiAgICAgIChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWRcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShjYXJkRWxlbWVudCwgcG9zaXRpb24gPSBcImJlZm9yZVwiKSB7XHJcbiAgICBzd2l0Y2ggKHBvc2l0aW9uKSB7XHJcbiAgICAgIGNhc2UgXCJiZWZvcmVcIjpcclxuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChjYXJkRWxlbWVudCk7XHJcbiAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICBjYXNlIFwiYWZ0ZXJcIjpcclxuICAgICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGNhcmRFbGVtZW50KTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbmRlckNhcmRzKCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfb3BlbmVkXCIpIHx8XHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9fY2xvc2VcIilcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1nXCIpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3N1YnRpdGxlXCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlbihuYW1lLCBsaW5rKSB7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlVGV4dC50ZXh0Q29udGVudCA9IG5hbWU7XHJcblxyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBmb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Zvcm1TdWJtaXQgPSBmb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fcG9wdXBGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19lZGl0XCIpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgZm9ybU9iamVjdCA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGZvcm1PYmplY3RbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBmb3JtT2JqZWN0O1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG5cclxuICAgIHRoaXMuX3BvcHVwRm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2Zvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcblxyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgcHJvZmlsZU5hbWVTZWxlY3RvciwgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVOYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHByb2ZpbGVOYW1lOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IHByb2ZpbGVOYW1lLCBkZXNjcmlwdGlvbiB9KSB7XHJcbiAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IHByb2ZpbGVOYW1lO1xyXG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCB7IGluaXRpYWxDYXJkcywgdmFsaWRhdGlvblNlbGVjdG9ycywgc2VsZWN0b3JzIH07XHJcblxyXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCLQkNGA0YXRi9C3XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9hcmtoeXouanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcItCn0LXQu9GP0LHQuNC90YHQutCw0Y8g0L7QsdC70LDRgdGC0YxcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwi0JjQstCw0L3QvtCy0L5cIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2l2YW5vdm8uanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcItCa0LDQvNGH0LDRgtC60LBcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2thbWNoYXRrYS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwi0KXQvtC70LzQvtCz0L7RgNGB0LrQuNC5INGA0LDQudC+0L1cIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwi0JHQsNC50LrQsNC7XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9iYWlrYWwuanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmNvbnN0IHZhbGlkYXRpb25TZWxlY3RvcnMgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19lZGl0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zdWJtaXQtYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCIucG9wdXBfX3N1Ym1pdC1idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiLnBvcHVwX19pdGVtLWVycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCIucG9wdXBfX2VkaXRfaW52YWxpZFwiLFxyXG59O1xyXG5cclxuY29uc3Qgc2VsZWN0b3JzID0ge1xyXG4gIGJ1dHRvbkVkaXQ6IFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIsXHJcbiAgYnV0dG9uQWRkOiBcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIsXHJcbiAgYnV0dG9uQ2xvc2VFZGl0UHJvZmlsZTogXCIucG9wdXBfX2Nsb3NlX3R5cGVfZWRpdFwiLFxyXG4gIGJ1dHRvbkNsb3NlRWRpdFBsYWNlOiBcIi5wb3B1cF9fY2xvc2VfdHlwZV9hZGRcIixcclxuICBidXR0b25DbG9zZUltYWdlUG9wdXA6IFwiLnBvcHVwX19jbG9zZV90eXBlX2ltZ1wiLFxyXG4gIHBvcHVwUHJvZmlsZUZvcm06IFwiLnBvcHVwX3R5cGVfZWRpdCAucG9wdXBfX2Zvcm1cIixcclxuICBwb3B1cFByb2ZpbGVQbGFjZTogXCIucG9wdXBfdHlwZV9uZXctY2FyZCAucG9wdXBfX2Zvcm1cIixcclxuICBwb3B1cEltYWdlOiBcIi5wb3B1cF90eXBlX2ltYWdlXCIsXHJcbiAgcG9wdXBQaG90bzogXCIucG9wdXBfX2ltZ1wiLFxyXG4gIHBvcHVwUGhvdG9UZXh0OiBcIi5wb3B1cF9fc3VidGl0bGVcIixcclxuICBuYW1lSW5wdXQ6IFwiLnBvcHVwX19lZGl0X3R5cGVfbmFtZVwiLFxyXG4gIGRlc2NyaXB0aW9uSW5wdXQ6IFwiLnBvcHVwX19lZGl0X3R5cGVfZGVzY3JpcHRpb25cIixcclxuICBwbGFjZVRpdGxlSW5wdXQ6IFwiLnBvcHVwX19lZGl0X3R5cGVfcGxhY2UtdGl0bGVcIixcclxuICBwbGFjZUxpbmtJbnB1dDogXCIucG9wdXBfX2VkaXRfdHlwZV9wbGFjZS1saW5rXCIsXHJcbiAgcHJvZmlsZU5hbWU6IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICBwcm9maWxlSm9iOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxyXG4gIHRlbXBsYXRlOiBcIi50ZW1wbGF0ZS1wbGFjZVwiLFxyXG4gIHBsYWNlOiBcIi5wbGFjZVwiLFxyXG4gIHBsYWNlQ2FyZDogXCIucGxhY2VzX19ncmlkXCIsXHJcbiAgdGV4dDogXCIucGxhY2VfX25hbWVcIixcclxuICBwaG90bzogXCIucGxhY2VfX3Bob3RvXCIsXHJcbiAgcG9wdXBQcm9maWxlOiBcIi5wb3B1cF90eXBlX2VkaXRcIixcclxuICBwb3B1cFBsYWNlOiBcIi5wb3B1cF90eXBlX25ldy1jYXJkXCIsXHJcbiAgYnV0dG9uTGlrZUNhcmQ6IFwiLnBsYWNlX19saWtlXCIsXHJcbiAgYnV0dG9uRGVsZXRlQ2FyZDogXCIucGxhY2VfX2RlbGV0ZVwiLFxyXG4gIHBvcHVwTGlzdDogXCIucG9wdXBcIixcclxufTtcclxuIiwiaW1wb3J0IFwiLi9wYWdlcy9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuL3NjcmlwdHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4vc2NyaXB0cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi9zY3JpcHRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tIFwiLi9zY3JpcHRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi9zY3JpcHRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tIFwiLi9zY3JpcHRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgaW5pdGlhbENhcmRzLFxyXG4gIHZhbGlkYXRpb25TZWxlY3RvcnMsXHJcbiAgc2VsZWN0b3JzLFxyXG59IGZyb20gXCIuL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG4vLyDQvtCx0YrRj9Cy0LvQtdC90LjQtSDQv9C10YDQtdC80LXQvdC90YvRhVxyXG5cclxuY29uc3QgYnV0dG9uRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmJ1dHRvbkVkaXQpO1xyXG5jb25zdCBidXR0b25BZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5idXR0b25BZGQpO1xyXG5cclxuY29uc3QgcG9wdXBQcm9maWxlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvcHVwUHJvZmlsZUZvcm0pO1xyXG5jb25zdCBwb3B1cFByb2ZpbGVQbGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvcHVwUHJvZmlsZVBsYWNlKTtcclxuXHJcbmNvbnN0IG5hbWVJbnB1dCA9IHBvcHVwUHJvZmlsZUZvcm0ucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMubmFtZUlucHV0KTtcclxuY29uc3QgZGVzY3JpcHRpb25JbnB1dCA9IHBvcHVwUHJvZmlsZUZvcm0ucXVlcnlTZWxlY3RvcihcclxuICBzZWxlY3RvcnMuZGVzY3JpcHRpb25JbnB1dFxyXG4pO1xyXG5cclxuY29uc3QgcGxhY2VDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMucGxhY2VDYXJkKTtcclxuXHJcbi8vINC+0YLQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwINGBINC60LDRgNGC0LjQvdC60L7QuVxyXG5cclxuY29uc3QgcG9wdXBJbWFnZUNhcmQgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfdHlwZV9pbWFnZVwiKTtcclxuXHJcbnBvcHVwSW1hZ2VDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2sobmFtZSwgbGluaykge1xyXG4gIHBvcHVwSW1hZ2VDYXJkLm9wZW4obmFtZSwgbGluayk7XHJcbn1cclxuXHJcbi8vINGE0YPQvdC60YbQuNGPINGB0L7Qt9C00LDQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxyXG5jb25zdCBjcmVhdGVDYXJkID0gKG5hbWUsIGxpbmssIHRlbXBsYXRlKSA9PiB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKG5hbWUsIGxpbmssIHRlbXBsYXRlLCBoYW5kbGVDYXJkQ2xpY2spO1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbn07XHJcblxyXG4vLyDRhNGD0L3QutGG0LjRjyDRgNC10L3QtNC10YDQsCDQvdCw0YfQsNC70YzQvdGL0YUg0LrQsNGA0YLQvtGH0LXQulxyXG5cclxuY29uc3QgcmVuZGVySW5pdGlhbENhcmRzID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICByZW5kZXJJbml0aWFsQ2FyZHMuYWRkSXRlbShcclxuICAgICAgICBjcmVhdGVDYXJkKGl0ZW0ubmFtZSwgaXRlbS5saW5rLCBcIi50ZW1wbGF0ZS1wbGFjZVwiKSxcclxuICAgICAgICBcImFmdGVyXCJcclxuICAgICAgKTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBcIi5wbGFjZXNfX2dyaWRcIlxyXG4pO1xyXG5cclxucmVuZGVySW5pdGlhbENhcmRzLnJlbmRlckNhcmRzKCk7XHJcblxyXG4vLyDQvtGC0LrRgNGL0YLQuNC1IHBvcHVwINC00L7QsdCw0LLQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcclxuXHJcbmNvbnN0IHBvcHVwQWRkQ2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX3R5cGVfbmV3LWNhcmRcIiwgKGZvcm1PYmplY3QpID0+IHtcclxuICByZW5kZXJJbml0aWFsQ2FyZHMuYWRkSXRlbShcclxuICAgIGNyZWF0ZUNhcmQoZm9ybU9iamVjdC50aXRsZSwgZm9ybU9iamVjdC5saW5rLCBcIi50ZW1wbGF0ZS1wbGFjZVwiKVxyXG4gICk7XHJcbiAgcG9wdXBBZGRDYXJkLmNsb3NlKCk7XHJcbn0pO1xyXG5cclxucG9wdXBBZGRDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyDQtNCw0L3QvdGL0LUg0LTQu9GPINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0L/RgNC+0YTQuNC70Y9cclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBwcm9maWxlTmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXHJcbn0pO1xyXG5cclxuLy8g0L7RgtC60YDRi9GC0LjQtSBwb3B1cCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXHJcblxyXG5jb25zdCBwb3B1cEVkaXRDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfdHlwZV9lZGl0XCIsIChmb3JtT2JqZWN0KSA9PiB7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgcHJvZmlsZU5hbWU6IGZvcm1PYmplY3QucHJvZmlsZU5hbWUsXHJcbiAgICBkZXNjcmlwdGlvbjogZm9ybU9iamVjdC5kZXNjcmlwdGlvbixcclxuICB9KTtcclxuICBwb3B1cEVkaXRDYXJkLmNsb3NlKCk7XHJcbn0pO1xyXG5cclxucG9wdXBFZGl0Q2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8g0LjRgdC/0L7Qu9GM0LfQvtCy0LDQvdC40LUg0LrQu9Cw0YHRgdCwINCy0LDQu9C40LTQsNGG0LjQuFxyXG5cclxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZCA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIHZhbGlkYXRpb25TZWxlY3RvcnMsXHJcbiAgcG9wdXBQcm9maWxlRm9ybVxyXG4pO1xyXG5wcm9maWxlRm9ybVZhbGlkLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IHBsYWNlRm9ybVZhbGlkID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgdmFsaWRhdGlvblNlbGVjdG9ycyxcclxuICBwb3B1cFByb2ZpbGVQbGFjZVxyXG4pO1xyXG5wbGFjZUZvcm1WYWxpZC5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vL9C+0LHRgNCw0LHQvtGC0YfQuNC60Lgg0YHQvtCx0YvRgtC40LlcclxuXHJcbmJ1dHRvbkVkaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwcm9maWxlRm9ybVZhbGlkLnJlbW92ZVZhbGlkYXRpb25FcnJvcnMoKTtcclxuXHJcbiAgY29uc3QgY3VycmVudFVzZXJJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuXHJcbiAgbmFtZUlucHV0LnZhbHVlID0gY3VycmVudFVzZXJJbmZvLnByb2ZpbGVOYW1lLnRyaW0oKTtcclxuICBkZXNjcmlwdGlvbklucHV0LnZhbHVlID0gY3VycmVudFVzZXJJbmZvLmRlc2NyaXB0aW9uLnRyaW0oKTtcclxuXHJcbiAgcG9wdXBFZGl0Q2FyZC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuYnV0dG9uQWRkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcG9wdXBQcm9maWxlUGxhY2UucmVzZXQoKTtcclxuXHJcbiAgcGxhY2VGb3JtVmFsaWQucmVtb3ZlVmFsaWRhdGlvbkVycm9ycygpO1xyXG5cclxuICBwbGFjZUZvcm1WYWxpZC5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XHJcblxyXG4gIHBvcHVwQWRkQ2FyZC5vcGVuKCk7XHJcbn0pO1xyXG4iXSwibmFtZXMiOlsiQ2FyZCIsIm5hbWUiLCJsaW5rIiwidGVtcGxhdGUiLCJoYW5kbGVDYXJkQ2xpY2siLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl90ZW1wbGF0ZSIsIl9oYW5kbGVDYXJkQ2xpY2siLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmRFbGVtZW50IiwiX2dldENhcmRUZW1wbGF0ZSIsIl9jYXJkSW1hZ2UiLCJfY2FyZExpa2UiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl9oYW5kbGVMaWtlQ2FyZCIsInJlbW92ZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIkZvcm1WYWxpZGF0b3IiLCJ2YWxpZGF0aW9uU2VsZWN0b3JzIiwiZm9ybUVsZW1lbnQiLCJfdmFsaWRhdGlvblNlbGVjdG9ycyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b24iLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImRpc2FibGVTdWJtaXRCdXR0b24iLCJmb3JFYWNoIiwiaW5wdXQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiaW5wdXRFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJhZGQiLCJlcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9lbmFibGVTdWJtaXRCdXR0b24iLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiQXJyYXkiLCJmcm9tIiwic29tZSIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJjYXJkRWxlbWVudCIsInBvc2l0aW9uIiwicHJlcGVuZCIsImFwcGVuZCIsIml0ZW0iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJldnQiLCJrZXkiLCJjbG9zZSIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhJbWFnZSIsIl9jYXJkSW1hZ2VUZXh0IiwiUG9wdXBXaXRoRm9ybSIsImZvcm1TdWJtaXQiLCJfZm9ybVN1Ym1pdCIsIl9wb3B1cEZvcm1FbGVtZW50IiwiZm9ybU9iamVjdCIsInZhbHVlIiwicmVzZXQiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsIlVzZXJJbmZvIiwicHJvZmlsZU5hbWVTZWxlY3RvciIsInByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVEZXNjcmlwdGlvbiIsInByb2ZpbGVOYW1lIiwiZGVzY3JpcHRpb24iLCJmb3JtU2VsZWN0b3IiLCJidXR0b25FZGl0IiwiYnV0dG9uQWRkIiwicG9wdXBQcm9maWxlRm9ybSIsInBvcHVwUHJvZmlsZVBsYWNlIiwibmFtZUlucHV0IiwiZGVzY3JpcHRpb25JbnB1dCIsInBvcHVwSW1hZ2VDYXJkIiwib3BlbiIsInNldEV2ZW50TGlzdGVuZXJzIiwiY3JlYXRlQ2FyZCIsImdlbmVyYXRlQ2FyZCIsInJlbmRlckluaXRpYWxDYXJkcyIsImFkZEl0ZW0iLCJyZW5kZXJDYXJkcyIsInBvcHVwQWRkQ2FyZCIsInRpdGxlIiwidXNlckluZm8iLCJwb3B1cEVkaXRDYXJkIiwic2V0VXNlckluZm8iLCJwcm9maWxlRm9ybVZhbGlkIiwiZW5hYmxlVmFsaWRhdGlvbiIsInBsYWNlRm9ybVZhbGlkIiwicmVtb3ZlVmFsaWRhdGlvbkVycm9ycyIsImN1cnJlbnRVc2VySW5mbyIsImdldFVzZXJJbmZvIiwidHJpbSJdLCJzb3VyY2VSb290IjoiIn0=